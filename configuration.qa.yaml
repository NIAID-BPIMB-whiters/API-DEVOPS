# =============================================================================
# QA ENVIRONMENT - PUBLISHER CONFIGURATION
# =============================================================================
# TARGET ENVIRONMENT: QA (niaid-bpimb-apim-qa)
# 
# This file configures how the publisher deploys artifacts TO the QA environment.
# Repository artifacts are extracted FROM DAIDS_DEV and contain DAIDS_DEV resource
# references. This configuration remaps those references to QA resources.
#
# Pipeline: DAIDS_DEV (extract) → Repository → DEV → QA (deploy using this config)
# =============================================================================

apimServiceName: niaid-bpimb-apim-qa  # TARGET: QA APIM Service
namedValues:
  # Remap Key Vault references from source (DAIDS_DEV) to target (QA)
  # Repository contains: kv-niaid-apim-dev (from DAIDS_DEV)
  # Deploy using: kv-niaid-bpimb-apim-qa (in QA)
  - name: apim-ai-connection-string
    properties:
      keyVault:
        secretIdentifier: https://kv-niaid-bpimb-apim-qa.vault.azure.net/secrets/apim-ai-connection-string
loggers:
  # Remap logger references from source (DAIDS_DEV) to target (QA)
  # Repository contains: "apim-daids-connect-ai" (from DAIDS_DEV)
  # Deploy as: "niaid-bpimb-apim-qa-ai" (in QA)
  - name: apim-daids-connect-ai
    properties:
      loggerType: applicationInsights
      resourceId: /subscriptions/18fc6b8b-44fa-47d7-ae51-36766ac67165/resourceGroups/niaid-bpimb-apim-qa-rg/providers/Microsoft.Insights/components/niaid-bpimb-apim-qa-ai
      credentials:
        connectionString: "{{niaid-bpimb-apim-qa-ai-connection-string}}"
diagnostics:
backends:

# =============================================================================
# SOAP/WSDL API MANAGEMENT NOTES
# =============================================================================
# Microsoft has documented that the current version of Azure APIops (v6.0.2) 
# does NOT support SOAP/WSDL APIs for automated deployment via publisher tool.
# 
# WSDL APIs must be deployed and managed manually through the Azure Portal.
# 
# For future SOAP API management:
# - Deploy manually through Azure Portal APIM interface
# - Do not add SOAP/WSDL specification files to this repository
# - APIops will ignore any manually deployed SOAP APIs in the portal
# =============================================================================

apis:
  # Configuration overrides for APIs across environments can be added here
  # Example structure (for supported API types - REST/OpenAPI/GraphQL only):
  # - name: demo-conference-api
  #   diagnostics:
  #     - name: applicationinsights
  #       properties:
  #         verbosity: Error
